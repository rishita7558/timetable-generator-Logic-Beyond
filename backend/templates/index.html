<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timetable Dashboard - IIIT Dharwad</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation Sidebar -->
    <nav class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class="fas fa-calendar-alt"></i>
                <h2>Timetable Pro</h2>
            </div>
        </div>
        
        <ul class="sidebar-nav">
            <li class="nav-item active">
                <a href="#" data-semester="all" data-branch="all">
                    <i class="fas fa-th-large"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            
            <!-- CSE Branch -->
            <li class="nav-item branch-section">
                <a href="#" class="branch-header">
                    <i class="fas fa-laptop-code"></i>
                    <span>Computer Science</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" data-semester="1" data-branch="CSE">
                    <i class="fas fa-book"></i>
                    <span>Semester 1 - CSE</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" data-semester="3" data-branch="CSE">
                    <i class="fas fa-book"></i>
                    <span>Semester 3 - CSE</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" data-semester="5" data-branch="CSE">
                    <i class="fas fa-book"></i>
                    <span>Semester 5 - CSE</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" data-semester="7" data-branch="CSE">
                    <i class="fas fa-book"></i>
                    <span>Semester 7 - CSE</span>
                </a>
            </li>
            
            <!-- DSAI Branch -->
            <li class="nav-item branch-section">
                <a href="#" class="branch-header">
                    <i class="fas fa-brain"></i>
                    <span>Data Science & AI</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" data-semester="1" data-branch="DSAI">
                    <i class="fas fa-book"></i>
                    <span>Semester 1 - DSAI</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" data-semester="3" data-branch="DSAI">
                    <i class="fas fa-book"></i>
                    <span>Semester 3 - DSAI</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" data-semester="5" data-branch="DSAI">
                    <i class="fas fa-book"></i>
                    <span>Semester 5 - DSAI</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" data-semester="7" data-branch="DSAI">
                    <i class="fas fa-book"></i>
                    <span>Semester 7 - DSAI</span>
                </a>
            </li>
            
            <!-- ECE Branch -->
            <li class="nav-item branch-section">
                <a href="#" class="branch-header">
                    <i class="fas fa-microchip"></i>
                    <span>Electronics & Communication</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" data-semester="1" data-branch="ECE">
                    <i class="fas fa-book"></i>
                    <span>Semester 1 - ECE</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" data-semester="3" data-branch="ECE">
                    <i class="fas fa-book"></i>
                    <span>Semester 3 - ECE</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" data-semester="5" data-branch="ECE">
                    <i class="fas fa-book"></i>
                    <span>Semester 5 - ECE</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" data-semester="7" data-branch="ECE">
                    <i class="fas fa-book"></i>
                    <span>Semester 7 - ECE</span>
                </a>
            </li>
            
            <!-- Add to sidebar in index.html -->
            <li class="nav-item branch-section">
                <a href="#" class="branch-header">
                    <i class="fas fa-file-alt"></i>
                    <span>Exam Timetables</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" data-section="exam-generate">
                    <i class="fas fa-calendar-plus"></i>
                    <span>Generate Exam Schedule</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" data-section="exam-view">
                    <i class="fas fa-list-alt"></i>
                    <span>View Exam Schedules</span>
                </a>
            </li>
            <!-- Common Actions -->
            <li class="nav-item">
                <a href="#upload" id="upload-nav-btn">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span>Upload Files</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" id="settings-nav-btn">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" id="help-nav-btn">
                    <i class="fas fa-question-circle"></i>
                    <span>Help & Support</span>
                </a>
            </li>
        </ul>
        
        <div class="sidebar-footer">
            <div class="user-profile">
                <div class="avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="user-info">
                    <span class="username">Administrator</span>
                    <span class="user-role">IIIT Dharwad</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Header -->
        <header class="top-header">
            <div class="header-left">
                <h1>Timetable Dashboard</h1>
                <p class="subtitle">Indian Institute of Information Technology, Dharwad</p>
            </div>
            <div class="header-right">
                <div class="header-actions">
                    <button class="btn btn-primary" id="generate-btn">
                        <i class="fas fa-bolt"></i>
                        Generate All Timetables
                    </button>
                    <button class="btn btn-secondary" id="refresh-btn">
                        <i class="fas fa-sync-alt"></i>
                        Refresh
                    </button>
                </div>
            </div>
        </header>

        <!-- Stats Overview -->
        <section class="stats-overview">
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-calendar-check"></i>
                </div>
                <div class="stat-info">
                    <h3 id="total-timetables">0</h3>
                    <p>Total Timetables</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-book-open"></i>
                </div>
                <div class="stat-info">
                    <h3 id="total-courses">0</h3>
                    <p>Total Courses</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-chalkboard-teacher"></i>
                </div>
                <div class="stat-info">
                    <h3 id="total-faculty">0</h3>
                    <p>Faculty Members</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-building"></i>
                </div>
                <div class="stat-info">
                    <h3 id="total-classrooms">0</h3>
                    <p>Classrooms</p>
                </div>
            </div>
        </section>

        <!-- File Upload Section -->
        <section class="upload-section" id="upload-section" style="display: none;">
            <div class="upload-container">
                <div class="upload-header">
                    <h2>Upload CSV Files</h2>
                    <p>Drag and drop your CSV files or click to browse</p>
                </div>
                
                <div class="upload-area" id="upload-area">
                    <div class="upload-content">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <h3>Drag & Drop Files Here</h3>
                        <p>Supported files: CSV</p>
                        <button class="btn btn-outline" id="browse-btn">
                            <i class="fas fa-folder-open"></i>
                            Browse Files
                        </button>
                    </div>
                    <input type="file" id="file-input" multiple accept=".csv" style="display: none;">
                </div>
                
                <div class="file-list" id="file-list">
                    <h4>Required Files:</h4>
                    <div class="required-files">
                        <div class="file-item required" data-file="course_data.csv">
                            <i class="fas fa-file-csv"></i>
                            <span>course_data.csv</span>
                            <span class="file-status"></span>
                        </div>
                        <div class="file-item required" data-file="faculty_availability.csv">
                            <i class="fas fa-file-csv"></i>
                            <span>faculty_availability.csv</span>
                            <span class="file-status"></span>
                        </div>
                        <div class="file-item required" data-file="classroom_data.csv">
                            <i class="fas fa-file-csv"></i>
                            <span>classroom_data.csv</span>
                            <span class="file-status"></span>
                        </div>
                        <div class="file-item required" data-file="student_data.csv">
                            <i class="fas fa-file-csv"></i>
                            <span>student_data.csv</span>
                            <span class="file-status"></span>
                        </div>
                        <div class="file-item required" data-file="exams_data.csv">
                            <i class="fas fa-file-csv"></i>
                            <span>exams_data.csv</span>
                            <span class="file-status"></span>
                        </div>
                    </div>
                    
                    <div class="uploaded-files" id="uploaded-files">
                        <h4>Uploaded Files:</h4>
                        <!-- Uploaded files will appear here -->
                    </div>
                </div>
                
                <div class="upload-actions">
                    <button class="btn btn-outline" id="cancel-upload-btn">
                        <i class="fas fa-times"></i>
                        Cancel
                    </button>
                    <button class="btn btn-primary" id="process-files-btn" disabled>
                        <i class="fas fa-cog"></i>
                        Process Files
                    </button>
                </div>
            </div>
        </section>

        <!-- Controls Section -->
        <section class="controls-section">
            <div class="control-group">
                <div class="control-item">
                    <label for="branch-filter">Branch</label>
                    <select id="branch-filter" class="control-select">
                        <option value="all">All Branches</option>
                        <option value="CSE">Computer Science</option>
                        <option value="DSAI">Data Science & AI</option>
                        <option value="ECE">Electronics & Communication</option>
                    </select>
                </div>
                <div class="control-item">
                    <label for="semester-filter">Semester</label>
                    <select id="semester-filter" class="control-select">
                        <option value="all">All Semesters</option>
                        <option value="1">Semester 1</option>
                        <option value="3">Semester 3</option>
                        <option value="5">Semester 5</option>
                        <option value="7">Semester 7</option>
                    </select>
                </div>
                <div class="control-item">
                    <label for="section-filter">Section</label>
                    <select id="section-filter" class="control-select">
                        <option value="all">All Sections</option>
                        <option value="A">Section A</option>
                        <option value="B">Section B</option>
                    </select>
                </div>
                <div class="control-item">
                    <label for="view-mode">View Mode</label>
                    <select id="view-mode" class="control-select">
                        <option value="grid">Grid View</option>
                        <option value="list">List View</option>
                        <option value="compact">Compact View</option>
                    </select>
                </div>
            </div>
            <div class="control-actions">
                <button class="btn btn-outline" id="upload-files-btn">
                    <i class="fas fa-cloud-upload-alt"></i>
                    Upload Files
                </button>
                <button class="btn btn-outline" id="print-all-btn">
                    <i class="fas fa-print"></i>
                    Print All
                </button>
                <button class="btn btn-success" id="download-all-btn">
                    <i class="fas fa-download"></i>
                    Download All
                </button>
            </div>
        </section>

        <!-- Timetables Section -->
        <section class="timetables-section">
            <div class="section-header">
                <h2 id="section-title">All Timetables</h2>
                <div class="section-actions">
                    <div class="view-toggle">
                        <button class="view-btn active" data-view="grid">
                            <i class="fas fa-th"></i>
                        </button>
                        <button class="view-btn" data-view="list">
                            <i class="fas fa-list"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="timetables-container" id="timetables-container">
                <!-- Timetables will be dynamically loaded here -->
                <div class="empty-state" id="empty-state">
                    <div class="empty-icon">
                        <i class="fas fa-calendar-plus"></i>
                    </div>
                    <h3>No Timetables Generated Yet</h3>
                    <p>Upload CSV files and click "Generate All Timetables" to create your schedule</p>
                    <button class="btn btn-primary" id="empty-generate-btn">
                        <i class="fas fa-bolt"></i>
                        Generate Timetables
                    </button>
                </div>
            </div>
        </section>

        <!-- Exam Schedule Generation Section -->
<!-- Exam Schedule Generation Section -->
<section class="exam-section" id="exam-generate-section" style="display: none;">
    <div class="section-header">
        <h2>Generate Exam Schedule</h2>
        <p>Create conflict-free exam timetable with intelligent scheduling</p>
    </div>
    
    <!-- Configuration Form - Full Width -->
    <div class="exam-configuration">
        <div class="form-card full-width">
            <div class="config-header">
                <h3><i class="fas fa-cog"></i> Exam Schedule Configuration</h3>
                <div class="config-actions">
                    <button class="btn btn-sm btn-outline" id="save-config-btn">
                        <i class="fas fa-save"></i>
                        Save Settings
                    </button>
                    <button class="btn btn-sm btn-outline" id="reset-config-btn">
                        <i class="fas fa-undo"></i>
                        Reset to Defaults
                    </button>
                </div>
            </div>
            
            <div class="config-tabs">
                <div class="tab-buttons">
                    <button class="tab-btn active" data-tab="basic">Basic Settings</button>
                    <button class="tab-btn" data-tab="advanced">Advanced Settings</button>
                    <button class="tab-btn" data-tab="constraints">Constraints</button>
                </div>
                
                <div class="tab-content">
                    <!-- Basic Settings Tab -->
                    <div class="tab-pane active" id="basic-tab">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="exam-period-start">Exam Period Start Date *</label>
                                <input type="text" id="exam-period-start" placeholder="DD/MM/YYYY" 
                                       class="form-control date-input" required>
                                <small>Format: DD/MM/YYYY (e.g., 15/12/2024)</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="exam-period-end">Exam Period End Date *</label>
                                <input type="text" id="exam-period-end" placeholder="DD/MM/YYYY" 
                                       class="form-control date-input" required>
                                <small>Format: DD/MM/YYYY (e.g., 30/12/2024)</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="max-exams-per-day">Maximum Exams Per Day</label>
                                <select id="max-exams-per-day" class="form-control">
                                    <option value="1">1 Exam</option>
                                    <option value="2" selected>2 Exams</option>
                                    <option value="3">3 Exams</option>
                                    <option value="4">4 Exams</option>
                                </select>
                                <small>Maximum number of exams scheduled per day</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="session-duration">Session Duration</label>
                                <select id="session-duration" class="form-control">
                                    <option value="180">3 hours (Standard)</option>
                                    <option value="120">2 hours (Short)</option>
                                    <option value="240">4 hours (Extended)</option>
                                </select>
                                <small>Duration for each exam session</small>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Advanced Settings Tab -->
                    <div class="tab-pane" id="advanced-tab">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="include-weekends">Include Weekends</label>
                                <select id="include-weekends" class="form-control">
                                    <option value="true">Yes</option>
                                    <option value="false" selected>No</option>
                                </select>
                                <small>Schedule exams on Saturdays and Sundays</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="department-conflict">Department Conflict Strictness</label>
                                <select id="department-conflict" class="form-control">
                                    <option value="strict">Strict - No same department on same day</option>
                                    <option value="moderate" selected>Moderate - Allow 1 same department per day</option>
                                    <option value="lenient">Lenient - Allow multiple same departments</option>
                                </select>
                                <small>How strictly to enforce department conflicts</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="preference-weight">Date Preference Weight</label>
                                <select id="preference-weight" class="form-control">
                                    <option value="high">High - Strongly prefer requested dates</option>
                                    <option value="medium" selected>Medium - Balance preferences and optimization</option>
                                    <option value="low">Low - Focus on optimal scheduling</option>
                                </select>
                                <small>How much to prioritize preferred dates</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="session-balance">Session Balance</label>
                                <select id="session-balance" class="form-control">
                                    <option value="strict" selected>Strict - Equal morning/afternoon sessions</option>
                                    <option value="flexible">Flexible - Allow imbalance if needed</option>
                                    <option value="none">None - No session balancing</option>
                                </select>
                                <small>How to balance morning vs afternoon sessions</small>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Constraints Tab -->
                    <div class="tab-pane" id="constraints-tab">
                        <div class="constraints-config">
                            <div class="constraint-group">
                                <h4>Department Constraints</h4>
                                <div class="constraint-options">
                                    <div class="constraint-option">
                                        <input type="checkbox" id="constraint-cse" checked>
                                        <label for="constraint-cse">Computer Science (CSE)</label>
                                    </div>
                                    <div class="constraint-option">
                                        <input type="checkbox" id="constraint-dsai" checked>
                                        <label for="constraint-dsai">Data Science & AI (DSAI)</label>
                                    </div>
                                    <div class="constraint-option">
                                        <input type="checkbox" id="constraint-ece" checked>
                                        <label for="constraint-ece">Electronics (ECE)</label>
                                    </div>
                                    <div class="constraint-option">
                                        <input type="checkbox" id="constraint-math" checked>
                                        <label for="constraint-math">Mathematics</label>
                                    </div>
                                    <div class="constraint-option">
                                        <input type="checkbox" id="constraint-physics" checked>
                                        <label for="constraint-physics">Physics</label>
                                    </div>
                                    <div class="constraint-option">
                                        <input type="checkbox" id="constraint-humanities" checked>
                                        <label for="constraint-humanities">Humanities</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="constraint-group">
                                <h4>Exam Type Constraints</h4>
                                <div class="constraint-options">
                                    <div class="constraint-option">
                                        <input type="checkbox" id="constraint-theory" checked>
                                        <label for="constraint-theory">Theory Exams</label>
                                    </div>
                                    <div class="constraint-option">
                                        <input type="checkbox" id="constraint-lab" checked>
                                        <label for="constraint-lab">Lab Exams</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="constraint-group">
                                <h4>Additional Rules</h4>
                                <div class="constraint-options">
                                    <div class="constraint-option">
                                        <input type="checkbox" id="rule-gap-days" checked>
                                        <label for="rule-gap-days">Ensure gap days between heavy exams</label>
                                    </div>
                                    <div class="constraint-option">
                                        <input type="checkbox" id="rule-session-limit" checked>
                                        <label for="rule-session-limit">Limit sessions per department per day</label>
                                    </div>
                                    <div class="constraint-option">
                                        <input type="checkbox" id="rule-prefer-morning" checked>
                                        <label for="rule-prefer-morning">Prefer morning slots for long exams</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="config-status" id="config-status">
                <i class="fas fa-info-circle"></i>
                <span>Using default configuration settings</span>
            </div>
            
            <div class="form-actions">
                <button class="btn btn-outline" id="exam-cancel-btn">
                    <i class="fas fa-times"></i>
                    Cancel
                </button>
                <button class="btn btn-primary" id="generate-exam-schedule-btn">
                    <i class="fas fa-magic"></i>
                    Generate Exam Schedule
                </button>
            </div>
        </div>
    </div>
    
    <!-- Preview Section - Full Width Below Configuration -->
    <div class="exam-preview-full" id="exam-preview">
        <div class="preview-header">
            <h3><i class="fas fa-eye"></i> Schedule Preview</h3>
            <div class="preview-actions">
                <button class="btn btn-sm btn-outline active" id="toggle-daily-view">
                    <i class="fas fa-calendar-day"></i>
                    Daily View
                </button>
                <button class="btn btn-sm btn-outline" id="toggle-list-view">
                    <i class="fas fa-list"></i>
                    List View
                </button>
                <button class="btn btn-sm btn-success" id="download-preview-btn" style="display: none;">
                    <i class="fas fa-download"></i>
                    Download Schedule
                </button>
            </div>
        </div>
        <div class="preview-content-full" id="exam-preview-content">
            <div class="empty-preview">
                <i class="fas fa-calendar-alt"></i>
                <h4>No Schedule Generated Yet</h4>
                <p>Configure the settings above and click "Generate Exam Schedule" to create your exam timetable</p>
            </div>
        </div>
    </div>
</section>

        <!-- Exam Timetables View Section -->
        <section class="exam-section" id="exam-view-section" style="display: none;">
            <div class="section-header">
                <h2>Exam Schedules</h2>
                <p>View and manage generated exam timetables organized by sessions</p>
            </div>
            
            <div class="exam-controls">
                <div class="control-group">
                    <div class="control-item">
                        <label for="exam-period-filter">Exam Period</label>
                        <select id="exam-period-filter" class="control-select">
                            <option value="all">All Periods</option>
                        </select>
                    </div>
                    <div class="control-item">
                        <label for="exam-dept-filter">Department</label>
                        <select id="exam-dept-filter" class="control-select">
                            <option value="all">All Departments</option>
                            <option value="CSE">Computer Science</option>
                            <option value="DSAI">Data Science & AI</option>
                            <option value="ECE">Electronics & Communication</option>
                            <option value="Mathematics">Mathematics</option>
                            <option value="Physics">Physics</option>
                            <option value="Humanities">Humanities</option>
                        </select>
                    </div>
                    <div class="control-item">
                        <label for="exam-session-filter">Session</label>
                        <select id="exam-session-filter" class="control-select">
                            <option value="all">All Sessions</option>
                            <option value="Morning">Morning Session</option>
                            <option value="Afternoon">Afternoon Session</option>
                        </select>
                    </div>
                    <div class="control-item">
                        <label for="exam-type-filter">Exam Type</label>
                        <select id="exam-type-filter" class="control-select">
                            <option value="all">All Types</option>
                            <option value="Theory">Theory</option>
                            <option value="Lab">Lab</option>
                        </select>
                    </div>
                </div>
                <div class="control-actions">
                    <button class="btn btn-outline" id="refresh-exam-btn">
                        <i class="fas fa-sync-alt"></i>
                        Refresh
                    </button>
                    <button class="btn btn-success" id="download-all-exam-btn">
                        <i class="fas fa-download"></i>
                        Download All
                    </button>
                    <button class="btn btn-primary" id="toggle-view-mode">
                        <i class="fas fa-exchange-alt"></i>
                        Toggle View
                    </button>
                </div>
            </div>
            
            <!-- View Mode Toggle -->
            <div class="view-mode-toggle">
                <div class="toggle-buttons">
                    <button class="toggle-btn active" data-view="session">
                        <i class="fas fa-calendar-day"></i>
                        Session View
                    </button>
                    <button class="toggle-btn" data-view="daily">
                        <i class="fas fa-list"></i>
                        Daily View
                    </button>
                    <button class="toggle-btn" data-view="compact">
                        <i class="fas fa-table"></i>
                        Table View
                    </button>
                </div>
            </div>
            
            <div class="exam-timetables-container" id="exam-timetables-container">
                <div class="empty-state" id="exam-empty-state">
                    <div class="empty-icon">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <h3>No Exam Schedules Generated</h3>
                    <p>Generate your first exam schedule to get started</p>
                    <button class="btn btn-primary" id="exam-empty-generate-btn">
                        <i class="fas fa-calendar-plus"></i>
                        Generate Exam Schedule
                    </button>
                </div>
            </div>
        </section>
        <!-- Quick Actions Panel -->
        <section class="quick-actions">
            <h3>Quick Actions</h3>
            <div class="action-grid">
                <div class="action-card" data-action="upload">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span>Upload Files</span>
                </div>
                <div class="action-card" data-action="export">
                    <i class="fas fa-file-export"></i>
                    <span>Export Data</span>
                </div>
                <div class="action-card" data-action="settings">
                    <i class="fas fa-cogs"></i>
                    <span>Settings</span>
                </div>
                <div class="action-card" data-action="help">
                    <i class="fas fa-question-circle"></i>
                    <span>Help & Support</span>
                </div>
            </div>
        </section>
    </main>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner">
                <i class="fas fa-spinner fa-spin"></i>
            </div>
            <h3>Generating Timetables</h3>
            <p>This may take a few moments...</p>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <span class="progress-text" id="progress-text">0%</span>
            </div>
        </div>
    </div>

    <!-- Upload Progress Overlay -->
    <div class="loading-overlay" id="upload-overlay">
        <div class="loading-content">
            <div class="loading-spinner">
                <i class="fas fa-upload fa-spin"></i>
            </div>
            <h3>Uploading Files</h3>
            <p>Processing your CSV files...</p>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="upload-progress-fill"></div>
                </div>
                <span class="progress-text" id="upload-progress-text">0%</span>
            </div>
        </div>
    </div>

    <!-- Notification System -->
    <div class="notification-container" id="notification-container"></div>

    <!-- Enhanced Settings Modal -->
    <div class="modal-overlay" id="settings-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-cog me-2"></i>UI & Theme Settings</h3>
                <button class="close-btn" onclick="closeSettingsModal()">&times;</button>
            </div>
            
            <div class="settings-content">
                <!-- Theme Selection -->
                <!-- Update the theme section in settings modal -->
                <div class="settings-section">
                    <h4><i class="fas fa-palette me-2"></i>Color Theme</h4>
                    <p class="setting-description" style="margin-bottom: 1rem; color: var(--gray); font-size: 0.9rem;">
                        Choose from our collection of professional pastel themes designed for comfort and elegance.
                    </p>
                    <div id="theme-selector">
                        <!-- Theme options will be dynamically inserted here -->
                    </div>
                </div>

                <!-- Appearance Settings -->
                <div class="settings-section">
                    <h4><i class="fas fa-eye me-2"></i>Appearance</h4>
                    <div class="settings-grid">
                        <div class="setting-item">
                            <label class="setting-label">Font Size</label>
                            <select class="setting-control" id="font-size" onchange="uiConfig.setFontSize(this.value)">
                                <option value="small">Small</option>
                                <option value="medium" selected>Medium</option>
                                <option value="large">Large</option>
                                <option value="xlarge">Extra Large</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label class="setting-label">Density</label>
                            <select class="setting-control" id="density" onchange="uiConfig.setDensity(this.value)">
                                <option value="compact">Compact</option>
                                <option value="comfortable" selected>Comfortable</option>
                                <option value="spacious">Spacious</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Accessibility -->
                <div class="settings-section">
                    <h4><i class="fas fa-universal-access me-2"></i>Accessibility</h4>
                    <div class="settings-grid">
                        <div class="setting-item">
                            <label class="setting-label">High Contrast Mode</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="high-contrast-toggle" onchange="uiConfig.toggleHighContrast()">
                                <label for="high-contrast-toggle" class="toggle-slider"></label>
                                <span class="toggle-text">Enhanced visibility</span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label class="setting-label">Reduce Animations</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="animations-toggle" onchange="uiConfig.toggleAnimations()">
                                <label for="animations-toggle" class="toggle-slider"></label>
                                <span class="toggle-text">Better performance</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Layout Options -->
                <div class="settings-section">
                    <h4><i class="fas fa-layer-group me-2"></i>Layout</h4>
                    <div class="settings-grid">
                        <div class="setting-item">
                            <label class="setting-label">Compact Mode</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="compact-toggle" onchange="uiConfig.toggleCompactMode()">
                                <label for="compact-toggle" class="toggle-slider"></label>
                                <span class="toggle-text">Save space</span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label class="setting-label">Collapse Sidebar</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="sidebar-toggle" onchange="uiConfig.toggleSidebar()">
                                <label for="sidebar-toggle" class="toggle-slider"></label>
                                <span class="toggle-text">More workspace</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="btn btn-outline" onclick="resetUISettings()">
                    <i class="fas fa-undo me-2"></i>Reset to Defaults
                </button>
                <button class="btn btn-primary" onclick="closeSettingsModal()">
                    <i class="fas fa-check me-2"></i>Apply Changes
                </button>
            </div>
        </div>
    </div>
    <!-- Help & Support Modal -->
    <div class="modal-overlay" id="help-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 10000;">
        <div class="modal-content" style="background: white; padding: 2rem; border-radius: 12px; max-width: 800px; width: 90%; max-height: 80vh; overflow-y: auto;">
            <div class="modal-header" style="display: flex; justify-content: between; align-items: center; margin-bottom: 1.5rem;">
                <h3 style="margin: 0;">
                    <i class="fas fa-question-circle me-2"></i>
                    Help & Support Center
                </h3>
                <button class="close-btn" onclick="closeHelpModal()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">&times;</button>
            </div>
            
            <div class="help-content">
                <!-- Quick Start Guide -->
                <div class="help-section" style="margin-bottom: 2rem;">
                    <h4 style="color: var(--primary); margin-bottom: 1rem;">
                        <i class="fas fa-rocket me-2"></i>
                        Quick Start Guide
                    </h4>
                    <div class="help-steps" style="display: grid; gap: 1rem;">
                        <div class="step" style="display: flex; gap: 1rem; padding: 1rem; background: var(--light); border-radius: 8px;">
                            <div class="step-number" style="background: var(--primary); color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold;">1</div>
                            <div>
                                <strong>Upload Required CSV Files</strong>
                                <p style="margin: 0.5rem 0 0 0; color: var(--gray);">Upload course_data.csv, faculty_availability.csv, classroom_data.csv, student_data.csv, and exams_data.csv</p>
                            </div>
                        </div>
                        <div class="step" style="display: flex; gap: 1rem; padding: 1rem; background: var(--light); border-radius: 8px;">
                            <div class="step-number" style="background: var(--primary); color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold;">2</div>
                            <div>
                                <strong>Generate Timetables</strong>
                                <p style="margin: 0.5rem 0 0 0; color: var(--gray);">Click "Generate All Timetables" to create schedules for all semesters and departments</p>
                            </div>
                        </div>
                        <div class="step" style="display: flex; gap: 1rem; padding: 1rem; background: var(--light); border-radius: 8px;">
                            <div class="step-number" style="background: var(--primary); color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold;">3</div>
                            <div>
                                <strong>View & Download</strong>
                                <p style="margin: 0.5rem 0 0 0; color: var(--gray);">Use filters to view specific timetables and download individual or all schedules</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- File Format Guide -->
                <div class="help-section" style="margin-bottom: 2rem;">
                    <h4 style="color: var(--primary); margin-bottom: 1rem;">
                        <i class="fas fa-file-csv me-2"></i>
                        CSV File Requirements
                    </h4>
                    <div class="file-requirements" style="display: grid; gap: 1rem;">
                        <div class="file-item" style="padding: 1rem; background: rgba(67, 97, 238, 0.05); border-radius: 8px; border-left: 4px solid var(--primary);">
                            <strong>course_data.csv</strong>
                            <p style="margin: 0.5rem 0 0 0; color: var(--gray); font-size: 0.9rem;">
                                Required columns: Course Code, Course Name, Semester, Department, LTPSC, Credits, Instructor, Elective (Yes/No)
                            </p>
                        </div>
                        <div class="file-item" style="padding: 1rem; background: rgba(67, 97, 238, 0.05); border-radius: 8px; border-left: 4px solid var(--primary);">
                            <strong>faculty_availability.csv</strong>
                            <p style="margin: 0.5rem 0 0 0; color: var(--gray); font-size: 0.9rem;">
                                Required columns: faculty name, Available Days, Unavailable Time Slots
                            </p>
                        </div>
                        <div class="file-item" style="padding: 1rem; background: rgba(67, 97, 238, 0.05); border-radius: 8px; border-left: 4px solid var(--primary);">
                            <strong>Other Files</strong>
                            <p style="margin: 0.5rem 0 0 0; color: var(--gray); font-size: 0.9rem;">
                                classroom_data.csv, student_data.csv, exams_data.csv with appropriate columns
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Features Guide -->
                <div class="help-section" style="margin-bottom: 2rem;">
                    <h4 style="color: var(--primary); margin-bottom: 1rem;">
                        <i class="fas fa-star me-2"></i>
                        Key Features
                    </h4>
                    <div class="features-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                        <div class="feature" style="padding: 1rem; background: var(--light); border-radius: 8px;">
                            <i class="fas fa-palette" style="color: var(--primary); margin-bottom: 0.5rem;"></i>
                            <strong>Color Coding</strong>
                            <p style="margin: 0.5rem 0 0 0; color: var(--gray); font-size: 0.9rem;">Courses are color-coded for easy identification</p>
                        </div>
                        <div class="feature" style="padding: 1rem; background: var(--light); border-radius: 8px;">
                            <i class="fas fa-users" style="color: var(--primary); margin-bottom: 0.5rem;"></i>
                            <strong>Common Electives</strong>
                            <p style="margin: 0.5rem 0 0 0; color: var(--gray); font-size: 0.9rem;">Elective courses scheduled in common slots for all departments</p>
                        </div>
                        <div class="feature" style="padding: 1rem; background: var(--light); border-radius: 8px;">
                            <i class="fas fa-filter" style="color: var(--primary); margin-bottom: 0.5rem;"></i>
                            <strong>Smart Filtering</strong>
                            <p style="margin: 0.5rem 0 0 0; color: var(--gray); font-size: 0.9rem;">Filter by department, semester, and section</p>
                        </div>
                        <div class="feature" style="padding: 1rem; background: var(--light); border-radius: 8px;">
                            <i class="fas fa-download" style="color: var(--primary); margin-bottom: 0.5rem;"></i>
                            <strong>Bulk Export</strong>
                            <p style="margin: 0.5rem 0 0 0; color: var(--gray); font-size: 0.9rem;">Download all timetables as a single ZIP file</p>
                        </div>
                    </div>
                </div>

                <!-- Troubleshooting -->
                <div class="help-section" style="margin-bottom: 2rem;">
                    <h4 style="color: var(--warning); margin-bottom: 1rem;">
                        <i class="fas fa-tools me-2"></i>
                        Troubleshooting
                    </h4>
                    <div class="troubleshooting" style="background: rgba(247, 37, 133, 0.05); padding: 1.5rem; border-radius: 8px; border-left: 4px solid var(--warning);">
                        <div class="issue" style="margin-bottom: 1rem;">
                            <strong>❌ No timetables generated?</strong>
                            <p style="margin: 0.5rem 0 0 0; color: var(--gray);">Check that all required CSV files are uploaded and have the correct format</p>
                        </div>
                        <div class="issue" style="margin-bottom: 1rem;">
                            <strong>⚠️ Elective courses not showing?</strong>
                            <p style="margin: 0.5rem 0 0 0; color: var(--gray);">Ensure elective courses are marked "Yes" in the Elective column</p>
                        </div>
                        <div class="issue">
                            <strong>🔧 Debugging tools</strong>
                            <p style="margin: 0.5rem 0 0 0; color: var(--gray);">Use the debug endpoints to check loaded data and file matching</p>
                        </div>
                    </div>
                </div>

                <!-- Support Contact -->
                <div class="help-section">
                    <h4 style="color: var(--success); margin-bottom: 1rem;">
                        <i class="fas fa-life-ring me-2"></i>
                        Get Help
                    </h4>
                    <div class="support-contact" style="background: rgba(76, 201, 240, 0.05); padding: 1.5rem; border-radius: 8px; border-left: 4px solid var(--success);">
                        <p style="margin: 0 0 1rem 0; color: var(--dark);">
                            Need additional help? Contact the development team or refer to the documentation.
                        </p>
                        <div class="contact-actions" style="display: flex; gap: 1rem;">
                            <button class="btn btn-primary" onclick="showDebugInfo()" style="padding: 0.5rem 1rem;">
                                <i class="fas fa-bug me-2"></i>Debug Info
                            </button>
                            <button class="btn btn-outline" onclick="clearCacheAndReload()" style="padding: 0.5rem 1rem;">
                                <i class="fas fa-sync me-2"></i>Clear Cache
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>